<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON</title>
</head>
<body>
    <div class="conteiner">

    </div>
<script
    src="https://code.jquery.com/jquery-3.6.0.min.js"
    integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
    crossorigin="anonymous"></script>
<!-- 소스 구현 -->
<script>
    /* 
    no : 데이터 고유 번호
    driver : 운전자
    car : 탑승 차량
    mileage : 주행 거리
    createAt : 운행시작 날짜
    endAt : 운행종료 날짜
    */
    var carData = [
        {
            no : 1,
            driver : '박재범',
            car : 'K5',
            mileage : '30',
            createAt : '2022-03-24 09:30:21',
            endAt : '2022-03-24 10:30:55'
        },
        {
            no : 2,
            driver : '김종국',
            car : 'K5',
            mileage : '10',
            createAt : '2022-03-24 10:55:12',
            endAt : '2022-03-24 11:10:12'
        },
        {
            no : 3,
            driver : '박재범',
            car : 'K5',
            mileage : '5',
            createAt : '2022-03-24 11:20:00',
            endAt : '2022-03-24 11:30:12'
        },
        {
            no : 4,
            driver : '김종국',
            car : 'K5',
            mileage : '17',
            createAt : '2022-03-24 12:00:30',
            endAt : '2022-03-24 12:50:00'
        }
    ];

        console.log(carData);   
        console.log('----------------------------------------------');     

    // 문제 1. 운전자가 김종국인 차량 주행거리 총합을 구하시오.
        var carSum1 = 0;
        for (var i=0; i<carData.length; i++) {
            if (carData[i].driver === '김종국') {
                var carMile1 = parseInt(carData[i].mileage)
                carSum1 += carMile1
            }
        }
        console.log('김종국 차량의 총 주행거리는 ['+carSum1+']');
        console.log('----------------------------------------------');

    // 문제 2. 운전자가 박재범인 차량의 json데이터 수는?
        var carJsonLength = 0;
        for (var i=0; i<carData.length; i++) {
            if (carData[i].driver === '박재범') {
                ++carJsonLength;
            }
        }
        console.log('박재범 차량의 json 데이터는 ['+carJsonLength+'개]');
        console.log('----------------------------------------------');

    // 문제 3. 자동차가 K5인 차량의 주행거리 총합을 구하시오.
        var carSum2 = 0;
        for (var i=0; i<carData.length; i++) {
            if (carData[i].car === 'K5') {
                var carMile2 = parseInt(carData[i].mileage);
                carSum2 += carMile2;
            }
        }
        console.log('K5의 총 주행거리는 ['+carSum2+']');
        console.log('----------------------------------------------');


    // 문제 4. 운전자가 김종국인 차량의 운행시작과 운행종료를 모두 출력하시오.
        var createAt = 0;
        var endAt = 0;
        for (var i=0; i<carData.length; i++) {
            if (carData[i].driver === '김종국') {
                createAt = carData[i].createAt;
                endAt = carData[i].endAt;
                console.log('김종국의 운행시작 시간은 ['+createAt+'], 운행종료 시간은 ['+endAt+']');
            }
        }
        console.log('----------------------------------------------');


    // json값을 html로 표현하는 방법
        $('.container').append(carData[0].driver);



    // 날짜 계산
        var start = carData[0].createAt;
        var end = carData[0].endAt;
        // step1. 문자를 날짜 형식으로 변경
            start = new Date(start);
            console.log(start);
            end = new Date(end);
            console.log(end);
        // step2. 현재 날짜를 초 단위로 변경 ( 1970년 1월 1일 자정이 기준 )
        //        ( Millisecond 시간 ) ,  ( 1초 = 1000ms )
            console.log(start.getTime());
            console.log(end.getTime());
        // step3. 끝시간 - 처음시간
            var diffHour = (end.getTime() - start.getTime()) / (1000 * 3600);   // 시간을 알고 싶을때는 맨 뒤에 3600
            var diffMinute = (end.getTime() - start.getTime()) / (1000 * 60);   // 분을 알고 싶을때는 맨 뒤에 60
            var diffSeconds = (end.getTime() - start.getTime()) / (1000 * 1);   // 초를 알고 싶을때는 맨 뒤에 1
            console.log(diffHour);
            console.log(diffMinute);
            console.log(diffSeconds);

</script>
</body>
</html>